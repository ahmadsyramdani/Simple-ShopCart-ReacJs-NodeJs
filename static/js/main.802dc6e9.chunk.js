(this.webpackJsonpXenWeb=this.webpackJsonpXenWeb||[]).push([[0],{100:function(e,t,a){e.exports=a(212)},105:function(e,t,a){},208:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),o=(a(105),a(14)),s=a(8),i=a(9),m=a(11),u=a(10),d=function(e){return"$"+Number(e.toFixed(2)).toLocaleString()+" "},p=function(e,t,a){return null==t&&(t=100),null==a&&(a="..."),e.length>t?e.substring(0,t-a.length)+a:e},h=a(16),b=function(e,t){return function(a){var n=e.slice(),r=!1;n.forEach((function(e){e.id===t.id&&(e.quantity+=1,r=!0)})),r||n.push(Object(h.a)(Object(h.a)({},t),{},{quantity:1})),localStorage.setItem("cartItems",JSON.stringify(n)),a({type:"ADD_TO_CART",payload:{cartItems:n}})}},E=function(e,t){return function(a){var n=e.slice().filter((function(e){return e.id!==t.id}));localStorage.setItem("cartItems",JSON.stringify(n)),a({type:"REMOVE_FROM_CART",payload:{cartItems:n}})}},f="https://xe-api.herokuapp.com",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(a){var n=e||1,r=t?"?pages=".concat(n,"&categoryId=").concat(t):"?pages=".concat(n),c="".concat(f,"/api/products").concat(r);fetch(c).then((function(e){return e.json()})).then((function(e){return a({type:"FETCH_PRODUCTS",payload:e.data.docs,totalPages:e.data.pages,totalItems:e.data.total,currentPage:e.data.currentPage})}))}},g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.props.products.map((function(t){return r.a.createElement("div",{className:"col-md-4",key:t.id},r.a.createElement("div",{className:"thumbnail text-center"},r.a.createElement("img",{src:t.imageUrl,alt:t.name}),r.a.createElement("p",null,t.name),r.a.createElement("b",null,d(t.price)),r.a.createElement("button",{className:"btn btn-primary",onClick:function(a){return e.props.addToCart(e.props.cartItems,t)}}," Add to cart ")))})),a=parseInt(this.props.currentPage),n=parseInt(this.props.totalPages),c=1===a?"disabled":"",l=a===n?"disabled":"",o=1===a?null:function(t){return e.props.fetchProducts(a-1)},s=a===n?null:function(t){return e.props.fetchProducts(a+1)};return r.a.createElement("section",null,r.a.createElement("div",{className:"row"},t),r.a.createElement("hr",null),r.a.createElement("div",{className:"row text-center",style:{paddingBottom:"60px"}},"Page ",this.props.currentPage," of ",this.props.totalPages," ",r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-normal ".concat(c),onClick:o},"Previous"),r.a.createElement("button",{className:"btn btn-normal ".concat(l),onClick:s},"Next")))}}]),a}(n.Component),N=Object(o.b)((function(e){return{products:e.products.filteredItems,cartItems:e.cart.items,totalPages:e.products.totalPages,totalItems:e.products.totalItems,currentPage:e.products.currentPage}}),{fetchProducts:v,addToCart:b})(g),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchCategories()}},{key:"render",value:function(){var e=this,t=this.props.categories.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id}," ",e.name," ")}));return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},this.props.totalItems," product found."),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",null,"Category",r.a.createElement("select",{className:"form-control",value:this.props.category,onChange:function(t){return e.props.fetchProducts(e.props.currentPage,t.target.value)}},r.a.createElement("option",{value:""}," All "),t)))))}}]),a}(n.Component),O=Object(o.b)((function(e){return{categories:e.categories.items,products:e.products.items,category:e.products.category,totalItems:e.products.totalItems,currentPage:e.products.currentPage}}),{fetchCategories:function(){return function(e){fetch("".concat(f,"/api/categories")).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_CATEGORIES",payload:t.data.docs})}))}},fetchProducts:v})(y),j=a(13),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.cartItems;return r.a.createElement("div",{className:"alert alert-info"},0===t.length?"Basket is empty":r.a.createElement("div",null,"You have ",t.length," product in the basket."),t.length>0&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("ul",{className:"list-group"},t.map((function(t){return r.a.createElement("li",{key:t.name,className:"list-group-item d-flex justify-content-between align-items-center list-group-item-info"},r.a.createElement("b",null,p(t.name,10,".."))," X ",t.quantity," = ",d(t.price*t.quantity),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.removeFromCart(e.props.cartItems,t)}},"X")))}))),r.a.createElement("div",{className:"col-md-12"},"Total: ",d(t.reduce((function(e,t){return e+t.price*t.quantity}),0))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(j.b,{to:"/checkout",className:"btn btn-primary"},"Checkout")))))}}]),a}(n.Component),C=Object(o.b)((function(e){return{cartItems:e.cart.items}}),{addToCart:b,removeFromCart:E})(I),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Xen Electronic"),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(O,null),r.a.createElement("hr",null),r.a.createElement(N,null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(C,null))))}}]),a}(n.Component),k=a(68),P=a.n(k),T=a(96),x=a(71),S=a(214),A=a(213);function _(){return(_=Object(T.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(f,"/api/orders"),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch(a,n).then((function(e){return e.json()})).then((function(e){return localStorage.setItem("cartItems",[]),window.location.href="/success"})).catch((function(e){return window.location.href="/error"}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(e){var t=e.name,a=void 0===t?"":t,n=e.email,r=void 0===n?"":n,c=e.phoneNumber,l=void 0===c?"":c,o=e.shippingAddress,s=void 0===o?"":o,i=e.totalPayment,m=void 0===i?"":i,u=e.orderItems,d=void 0===u?[]:u,p={},h=!1,b=[];if(d.forEach((function(e){b.push({productId:e.id,quantity:e.quantity})})),d=b,""===a.trim()&&(p.name="Required",h=!0),a.length>20&&(p.name="Too long",h=!0),""===r.trim()&&(p.email="Required",h=!0),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(r)||(p.email="Invalid email address",h=!0),""===l.trim()&&(p.phoneNumber="Required",h=!0),/^(^\+62\s?|^0)(\d{3,4}-?){2}\d{3,4}$/g.test(l)||(p.phoneNumber="Invalid Phone Number",h=!0),""===s.trim()&&(p.shippingAddress="Required",h=!0),h)throw new x.a(p);return function(e){return _.apply(this,arguments)}({name:a,email:r,phoneNumber:l,shippingAddress:s,totalPayment:m,orderItems:d})},q=function(e){var t=e.type,a=e.label,n=e.input,c=e.meta,l=c.touched,o=c.error;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,a),r.a.createElement("input",Object.assign({},n,{placeholder:a,type:t,className:"form-control"})),l&&o&&r.a.createElement("span",{className:"error text-danger"},o))},F=Object(A.a)({form:"simple"})((function(e){var t=e.handleSubmit,a=e.pristine,n=e.submitting;return r.a.createElement("form",{onSubmit:t(R)},r.a.createElement(S.a,{name:"name",label:"Name",component:q}),r.a.createElement(S.a,{name:"email",label:"Email",component:q}),r.a.createElement(S.a,{name:"phoneNumber",label:"Phone Number",component:q}),r.a.createElement(S.a,{name:"shippingAddress",label:"Shipping Address",component:q}),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("b",null,"Total Shipping Cost (5% from Subtotal): ",d(e.shippingCost)," "),r.a.createElement("br",null),r.a.createElement("b",null,"Tax ",e.tax,"% : ",d(e.subtTotalWithTax)),r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h4",null,"Total: ",d(e.totalCost)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(j.b,{to:"/",className:"btn btn-primary"},"Back")),r.a.createElement("div",{className:"col-md-6 text-right"},r.a.createElement("button",{type:"submit",disabled:a||n,className:"btn btn-success"},"PAY NOW"))))})),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.cartItems.reduce((function(e,t){return e+t.price*t.quantity}),0),a=.1*t,n=.05*t,c=a+n+t;return r.a.createElement("div",{className:"container",style:{paddingBottom:"60px"}},r.a.createElement("h1",null,"Checkout - Xen Electronic"),r.a.createElement("hr",null),r.a.createElement("div",{className:"table"},r.a.createElement("div",{className:"alert alert-info"},0===this.props.cartItems.length?"Product is empty":r.a.createElement("div",null,"Selected product ",this.props.cartItems.length," ")),this.props.cartItems.length>0&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},this.props.cartItems.map((function(t){return r.a.createElement("div",{className:"row",key:t.id},r.a.createElement("div",{className:"col-md-1"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.removeFromCart(e.props.cartItems,t)}},"X")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("img",{className:"rounded img-thumbnail",src:t.imageUrl,alt:t.name})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("b",null,p(t.name,100,".."))),r.a.createElement("div",{className:"col-md-1"},d(t.price)),r.a.createElement("div",{className:"col-md-1"},"X"),r.a.createElement("div",{className:"col-md-1"},t.quantity),r.a.createElement("div",{className:"col-md-2 text-right"},d(t.price*t.quantity)))})),r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("h5",null,"Subt Total: ",d(this.props.cartItems.reduce((function(e,t){return e+t.price*t.quantity}),0))))))),this.props.cartItems.length>0&&r.a.createElement(F,{shippingCost:n,tax:10,totalCost:c,subtTotalWithTax:a,cartItems:this.props.cartItems,initialValues:{totalPayment:c,orderItems:this.props.cartItems}}),0===this.props.cartItems.length&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(j.b,{to:"/",className:"btn btn-primary"},"Back"))))}}]),a}(n.Component),D=Object(o.b)((function(e){return{cartItems:e.cart.items,email:e.email,name:e.name,phoneNumber:e.phoneNumber,shippingAddress:e.shippingAddress}}),{addToCart:b,removeFromCart:E})(B),X=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-wrap d-flex flex-row align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",null,"404"),r.a.createElement("div",{className:"mb-4 lead"},"The page you are looking for was not found."),r.a.createElement(j.b,{to:"/",className:"btn btn-primary"},"Back to Home")))))}}]),a}(n.Component),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-wrap d-flex flex-row align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",null,"Congratulation!"),r.a.createElement("div",{className:"mb-4 lead"},"Your purchase is completed"),r.a.createElement(j.b,{to:"/",className:"btn btn-primary"},"Back to Home")))))}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-wrap d-flex flex-row align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",null,"Error"),r.a.createElement("div",{className:"mb-4 lead"},"Something went wrong!"),r.a.createElement(j.b,{to:"/",className:"btn btn-primary"},"Back to Home")))))}}]),a}(n.Component),W=a(6),J=a(98),U=a(215),V={items:[],filteredItems:[],category:""},$={items:[]},Y={items:[]},Z=Object(W.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return Object(h.a)(Object(h.a)({},e),{},{items:t.payload,filteredItems:t.payload,totalPages:t.totalPages,totalItems:t.totalItems,currentPage:t.currentPage,category:t.payload.category});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATEGORIES":return Object(h.a)(Object(h.a)({},e),{},{items:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":case"REMOVE_FROM_CART":return Object(h.a)(Object(h.a)({},e),{},{items:t.payload.cartItems});default:return e}},form:U.a}),G={cart:{items:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]}},L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d,z=Object(W.e)(Z,G,L(Object(W.a)(J.a))),K=(a(208),a(7));var Q=function(){return r.a.createElement(o.a,{store:z},r.a.createElement(j.a,null,r.a.createElement(K.d,null,r.a.createElement(K.b,{path:"/",exact:!0,component:w}),r.a.createElement(K.b,{path:"/checkout",component:D}),r.a.createElement(K.b,{path:"/success",component:H}),r.a.createElement(K.b,{path:"/error",component:M}),r.a.createElement(K.b,{path:"/404",component:X}),r.a.createElement(K.a,{to:"/404"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(209).config(),l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.802dc6e9.chunk.js.map